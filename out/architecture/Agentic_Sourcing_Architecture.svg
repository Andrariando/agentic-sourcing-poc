<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2621px" preserveAspectRatio="none" style="width:2729px;height:2621px;background:#FEFEFE;" version="1.1" viewBox="0 0 2729 2621" width="2729px" zoomAndPan="magnify"><defs><filter height="300%" id="fdhsufw0hmxbo" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="240" x="1234.5" y="11.4189">Agentic Sourcing Copilot - Enterprise Architecture</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="281" x="1214" y="25.2549">Human-in-the-Loop Multi-Agent Decision Support System</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="1356" y="39.0908"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="133" x="1186.5" y="52.9268">Current Implementation</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="200" x="1322.5" y="52.9268">— Hybrid Classification &amp; Artifact System</text><!--MD5=[4c275c90aa705310e0149fa934b9dd18]
cluster **FRONTEND** - Streamlit UI--><path d="M1994,380.3438 L2118,380.3438 A7.5,7.5 0 0 1 2123,385.3438 L2130,400.1797 L2486,400.1797 A5,5 0 0 1 2491,405.1797 L2491,734.8438 A5,5 0 0 1 2486,739.8438 L1994,739.8438 A5,5 0 0 1 1989,734.8438 L1989,385.3438 A5,5 0 0 1 1994,380.3438 " fill="#FEFEFE" filter="url(#fdhsufw0hmxbo)" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1989" x2="2130" y1="400.1797" y2="400.1797"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="55" x="1993" y="393.7627">FRONTEND</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="70" x="2051" y="393.7627">- Streamlit UI</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="52" x="2218" y="413.5986">«frontend»</text><!--MD5=[9ac15a0cf91036a266899d8638101d30]
cluster **BACKEND** - FastAPI Server--><path d="M273,548.3438 L410,548.3438 A7.5,7.5 0 0 1 415,553.3438 L422,568.1797 L1769,568.1797 A5,5 0 0 1 1774,573.1797 L1774,2124.8438 A5,5 0 0 1 1769,2129.8438 L273,2129.8438 A5,5 0 0 1 268,2124.8438 L268,553.3438 A5,5 0 0 1 273,548.3438 " fill="#FEFEFE" filter="url(#fdhsufw0hmxbo)" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="268" x2="422" y1="568.1797" y2="568.1797"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="50" x="272" y="561.7627">BACKEND</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="88" x="325" y="561.7627">- FastAPI Server</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="55" x="997.5" y="581.5986">«backend»</text><!--MD5=[8c6f3eb1e022e81ddcb8dd81e44e8cb0]
cluster **Services Layer**--><path d="M921,1036.3438 L999,1036.3438 A7.5,7.5 0 0 1 1004,1041.3438 L1011,1056.1797 L1389,1056.1797 A5,5 0 0 1 1394,1061.1797 L1394,1154.3438 A5,5 0 0 1 1389,1159.3438 L921,1159.3438 A5,5 0 0 1 916,1154.3438 L916,1041.3438 A5,5 0 0 1 921,1036.3438 " fill="#FEFEFE" filter="url(#fdhsufw0hmxbo)" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="916" x2="1011" y1="1056.1797" y2="1056.1797"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="82" x="920" y="1049.7627">Services Layer</text><!--MD5=[3de3d5543dc291a4255e037d5ae25fa2]
cluster **SUPERVISOR** - Central Orchestrator--><path d="M1082,602.3438 L1269,602.3438 A7.5,7.5 0 0 1 1274,607.3438 L1281,622.1797 L1377,622.1797 A5,5 0 0 1 1382,627.1797 L1382,944.3438 A5,5 0 0 1 1377,949.3438 L1082,949.3438 A5,5 0 0 1 1077,944.3438 L1077,607.3438 A5,5 0 0 1 1082,602.3438 " fill="#FEFEFE" filter="url(#fdhsufw0hmxbo)" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1077" x2="1281" y1="622.1797" y2="622.1797"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="67" x="1081" y="615.7627">SUPERVISOR</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="121" x="1151" y="615.7627">- Central Orchestrator</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="64" x="1201.5" y="635.5986">«supervisor»</text><!--MD5=[1a199e9c8f2ac4c206e7c8e7db9c8715]
cluster **7 OFFICIAL AGENTS**--><path d="M669,1220.3438 L769,1220.3438 A7.5,7.5 0 0 1 774,1225.3438 L781,1240.1797 L1631,1240.1797 A5,5 0 0 1 1636,1245.1797 L1636,1352.3438 A5,5 0 0 1 1631,1357.3438 L669,1357.3438 A5,5 0 0 1 664,1352.3438 L664,1225.3438 A5,5 0 0 1 669,1220.3438 " fill="#FEFEFE" filter="url(#fdhsufw0hmxbo)" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="664" x2="781" y1="1240.1797" y2="1240.1797"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="104" x="668" y="1233.7627">7 OFFICIAL AGENTS</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="39" x="1134.5" y="1253.5986">«agent»</text><!--MD5=[4fc4e5993e795f06bb4192b1b07c81cf]
cluster **TASK EXECUTION LAYER**--><path d="M1522,1418.3438 L1647,1418.3438 A7.5,7.5 0 0 1 1652,1423.3438 L1659,1438.1797 L1674,1438.1797 A5,5 0 0 1 1679,1443.1797 L1679,2100.8438 A5,5 0 0 1 1674,2105.8438 L1522,2105.8438 A5,5 0 0 1 1517,2100.8438 L1517,1423.3438 A5,5 0 0 1 1522,1418.3438 " fill="#FEFEFE" filter="url(#fdhsufw0hmxbo)" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1517" x2="1659" y1="1438.1797" y2="1438.1797"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="129" x="1521" y="1431.7627">TASK EXECUTION LAYER</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="33" x="1585.5" y="1451.5986">«task»</text><!--MD5=[3e48907bd97ade0542b67fae3325eb92]
cluster **ARTIFACT SYSTEM**--><path d="M1326,1425.8438 L1423,1425.8438 A7.5,7.5 0 0 1 1428,1430.8438 L1435,1445.6797 L1488,1445.6797 A5,5 0 0 1 1493,1450.6797 L1493,1744.3438 A5,5 0 0 1 1488,1749.3438 L1326,1749.3438 A5,5 0 0 1 1321,1744.3438 L1321,1430.8438 A5,5 0 0 1 1326,1425.8438 " fill="#FEFEFE" filter="url(#fdhsufw0hmxbo)" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1321" x2="1435" y1="1445.6797" y2="1445.6797"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="101" x="1325" y="1439.2627">ARTIFACT SYSTEM</text><!--MD5=[8f149d3ff5a29feaeca4735ddec664bc]
cluster **RAG LAYER**--><path d="M448,1844.8438 L505,1844.8438 A7.5,7.5 0 0 1 510,1849.8438 L517,1864.6797 L588,1864.6797 A5,5 0 0 1 593,1869.6797 L593,2093.8438 A5,5 0 0 1 588,2098.8438 L448,2098.8438 A5,5 0 0 1 443,2093.8438 L443,1849.8438 A5,5 0 0 1 448,1844.8438 " fill="#FEFEFE" filter="url(#fdhsufw0hmxbo)" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="443" x2="517" y1="1864.6797" y2="1864.6797"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="61" x="447" y="1858.2627">RAG LAYER</text><!--MD5=[103796216b7f31ff20ade2d8b3e0865b]
cluster **INGESTION LAYER**--><path d="M297,1240.8438 L387,1240.8438 A7.5,7.5 0 0 1 392,1245.8438 L399,1260.6797 L582,1260.6797 A5,5 0 0 1 587,1265.6797 L587,1345.8438 A5,5 0 0 1 582,1350.8438 L297,1350.8438 A5,5 0 0 1 292,1345.8438 L292,1245.8438 A5,5 0 0 1 297,1240.8438 " fill="#FEFEFE" filter="url(#fdhsufw0hmxbo)" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="292" x2="399" y1="1260.6797" y2="1260.6797"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="94" x="296" y="1254.2627">INGESTION LAYER</text><!--MD5=[88f919cc70c6e2f8b4a45820d743cff8]
cluster **DATA LAYER** - Persistence--><path d="M52,2190.8438 L193,2190.8438 A7.5,7.5 0 0 1 198,2195.8438 L205,2210.6797 L550,2210.6797 A5,5 0 0 1 555,2215.6797 L555,2350.8438 A5,5 0 0 1 550,2355.8438 L52,2355.8438 A5,5 0 0 1 47,2350.8438 L47,2195.8438 A5,5 0 0 1 52,2190.8438 " fill="#FEFEFE" filter="url(#fdhsufw0hmxbo)" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="47" x2="205" y1="2210.6797" y2="2210.6797"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="68" x="51" y="2204.2627">DATA LAYER</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="74" x="122" y="2204.2627">- Persistence</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="33" x="288.5" y="2224.0986">«data»</text><!--MD5=[4b4aa12fd50f56bd13a7a0170aaccc36]
entity dashboard--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="124" x="2005" y="432.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="2015" y="454.2627">&#128202;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="90" x="2029" y="454.2627">Case Dashboard</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="2015" y="468.0986">Case list, metrics,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="98" x="2015" y="481.9346">filtering, status view</text><!--MD5=[4af8dce8cff07d067cf4221318aaa363]
entity copilot--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="75.3438" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="104" x="2371" y="426.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="2381" y="447.7627">&#128172;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="70" x="2395" y="447.7627">Case Copilot</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="71" x="2381" y="461.5986">Chat interface,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="74" x="2381" y="475.4346">artifact display,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="43" x="2381" y="489.2705">audit trail</text><!--MD5=[87ce26710ac76f4f5901bc8fd9789d9e]
entity knowledge--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="171" x="2164.5" y="432.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="2174.5" y="454.2627">&#128193;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="137" x="2188.5" y="454.2627">Knowledge Management</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="86" x="2174.5" y="468.0986">Document upload,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="67" x="2174.5" y="481.9346">data ingestion</text><!--MD5=[6be96040792a0cd556c535244c12ec70]
entity api_client--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="148" x="2220" y="661.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="2230" y="683.2627">&#128268;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="53" x="2244" y="683.2627">API Client</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="128" x="2230" y="697.0986">HTTP/REST communication</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="79" x="2230" y="710.9346">or Direct imports</text><!--MD5=[e2307af040e3f87d22824e7603ca28ec]
entity api--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="141" x="1576.5" y="864.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="1586.5" y="886.2627">&#127760;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="48" x="1600.5" y="886.2627">REST API</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="121" x="1586.5" y="900.0986">/cases, /chat, /decisions,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="70" x="1586.5" y="913.9346">/ingest, /health</text><!--MD5=[789e23807450d0f32381ad58adade5f0]
entity chat_svc--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="75.3438" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="124" x="1097" y="1068.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="1107" y="1089.7627">&#128172;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="69" x="1121" y="1089.7627">Chat Service</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="1107" y="1103.5986">Message processing,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="72" x="1107" y="1117.4346">intent handling,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="97" x="1107" y="1131.2705">response formatting</text><!--MD5=[252e12d2df198ece75d7fc8077b9d9d4]
entity case_svc--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="75.3438" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="121" x="1256.5" y="1068.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="1266.5" y="1089.7627">&#128203;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="72" x="1280.5" y="1089.7627">Case Service</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59" x="1266.5" y="1103.5986">Case CRUD,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="101" x="1266.5" y="1117.4346">artifact management,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="84" x="1266.5" y="1131.2705">state persistence</text><!--MD5=[c302a21b22525181f366f2bd9dea10ca]
entity ingest_svc--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="130" x="932" y="1074.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="942" y="1096.2627">&#128229;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="96" x="956" y="1096.2627">Ingestion Service</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="103" x="942" y="1110.0986">Upload orchestration,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="45" x="942" y="1123.9346">validation</text><!--MD5=[7342edd9a184d8607391f4c130efbf01]
entity router--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="89.1797" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="189" x="1176.5" y="648.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="8" x="1186.5" y="669.7627">&#129504;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="72" x="1197.5" y="669.7627">Intent Router</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="101" x="1186.5" y="683.5986">Hybrid Classification:</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="95" x="1186.5" y="697.4346">• Rule-based (fast)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="124" x="1186.5" y="711.2705">• LLM fallback (accurate)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="169" x="1186.5" y="725.1064">• Two-level (UserGoal+WorkType)</text><!--MD5=[203532b68035934a929f249a5fd26f91]
entity state_mgr--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="75.3438" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="124" x="1093" y="858.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="1103" y="879.7627">&#128202;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="79" x="1117" y="879.7627">State Manager</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="93" x="1103" y="893.5986">DTP stage tracking,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="1103" y="907.4346">validation, transitions,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="88" x="1103" y="921.2705">ONLY state writer</text><!--MD5=[75390d3fefe5b03c70cb446d957a6395]
entity planner--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="114" x="1252" y="864.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="1262" y="886.2627">&#128203;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="80" x="1276" y="886.2627">Action Planner</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="78" x="1262" y="900.0986">Agent selection,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="63" x="1262" y="913.9346">task planning</text><!--MD5=[0cd6d143226e0aa5e0d21836b7b0a6b9]
entity signal_agent--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="75.3438" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="119" x="1172.5" y="1266.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="1182.5" y="1287.7627">&#128225;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="85" x="1196.5" y="1287.7627">Sourcing Signal</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="43" x="1182.5" y="1301.5986">(DTP-01)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="79" x="1182.5" y="1315.4346">Signal detection,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="79" x="1182.5" y="1329.2705">urgency scoring</text><!--MD5=[38d537fee585efdef8f1c38976a87a4e]
entity supplier_agent--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="75.3438" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="123" x="836.5" y="1266.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="9" x="846.5" y="1287.7627">⭐</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="91" x="858.5" y="1287.7627">Supplier Scoring</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="43" x="846.5" y="1301.5986">(DTP-02)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="93" x="846.5" y="1315.4346">Evaluation, ranking,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="77" x="846.5" y="1329.2705">eligibility checks</text><!--MD5=[2e2995ad3460f19375202185c2494efe]
entity rfx_agent--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="130" x="1490" y="1272.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="1500" y="1294.2627">&#128221;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="48" x="1514" y="1294.2627">RFx Draft</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="43" x="1500" y="1308.0986">(DTP-03)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="110" x="1500" y="1321.9346">RFI/RFP/RFQ assembly</text><!--MD5=[74e2ddb0a0f069b766dc019571ca4d61]
entity negotiation_agent--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="75.3438" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="143" x="994.5" y="1266.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="1004.5" y="1287.7627">&#129309;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="109" x="1018.5" y="1287.7627">Negotiation Support</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="43" x="1004.5" y="1301.5986">(DTP-04)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="92" x="1004.5" y="1315.4346">Leverage analysis,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="83" x="1004.5" y="1329.2705">targets, playbook</text><!--MD5=[ccf4e69e9afbd78ce1de2289ef8f24ff]
entity contract_agent--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="75.3438" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="128" x="1327" y="1266.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="1337" y="1287.7627">&#128196;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="94" x="1351" y="1287.7627">Contract Support</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="43" x="1337" y="1301.5986">(DTP-05)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="78" x="1337" y="1315.4346">Term extraction,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="89" x="1337" y="1329.2705">validation, handoff</text><!--MD5=[a6af673e7c9d46cd5b69a9a1146c0c0c]
entity impl_agent--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="75.3438" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="121" x="680.5" y="1266.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="690.5" y="1287.7627">&#128640;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="87" x="704.5" y="1287.7627">Implementation</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="43" x="690.5" y="1301.5986">(DTP-06)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="78" x="690.5" y="1315.4346">Rollout planning,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="66" x="690.5" y="1329.2705">value capture</text><!--MD5=[a69ffa393f4828dd55768dd05a07bdd7]
entity task_rules--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="122" x="1533" y="1464.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1543" y="1485.7627">1️⃣</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="31" x="1560" y="1485.7627">Rules</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="102" x="1543" y="1499.5986">Deterministic checks,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="76" x="1543" y="1513.4346">policy validation</text><!--MD5=[e6562574f0672370c29c27bdece53b46]
entity task_retrieval--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="115" x="1534.5" y="1664.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1544.5" y="1686.2627">2️⃣</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="48" x="1561.5" y="1686.2627">Retrieval</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="95" x="1544.5" y="1700.0986">ChromaDB + SQLite</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="82" x="1544.5" y="1713.9346">query, grounding</text><!--MD5=[2a857a500a5a28ae0250c040aafd948c]
entity task_analytics--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="129" x="1533.5" y="1876.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1543.5" y="1898.2627">3️⃣</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="50" x="1560.5" y="1898.2627">Analytics</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="109" x="1543.5" y="1912.0986">Scoring, normalization,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="97" x="1543.5" y="1925.9346">comparison, ranking</text><!--MD5=[a01003f875e5153ce9664344efeb5900]
entity task_llm--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="122" x="1540" y="2027.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1550" y="2049.2627">4️⃣</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="24" x="1567" y="2049.2627">LLM</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="102" x="1550" y="2063.0986">Narration, summaries</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="1550" y="2076.9346">(last resort only)</text><!--MD5=[6d140ca06fa3e705ccff803348b39241]
entity artifact_builder--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="75.3438" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="125" x="1337.5" y="1658.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="1347.5" y="1679.7627">&#128230;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="82" x="1361.5" y="1679.7627">Artifact Builder</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="68" x="1347.5" y="1693.5986">Pack creation,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="89" x="1347.5" y="1707.4346">verification status,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="105" x="1347.5" y="1721.2705">grounding references</text><!--MD5=[09b6c84ea678f301e5c93c4a867bdcc0]
entity exec_metadata--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="75.3438" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="140" x="1337" y="1457.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="1347" y="1479.2627">&#128202;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="106" x="1361" y="1479.2627">Execution Metadata</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="71" x="1347" y="1493.0986">Tokens, costs,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="57" x="1347" y="1506.9346">task details,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="82" x="1347" y="1520.7705">retrieval sources</text><!--MD5=[200b716258823f6794d107a60a287b95]
entity retriever--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="104" x="468" y="1876.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="478" y="1898.2627">&#128269;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="51" x="492" y="1898.2627">Retriever</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="84" x="478" y="1912.0986">Semantic search,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="68" x="478" y="1925.9346">metadata filter</text><!--MD5=[264d3d63eb61e1fd66af9e1f62e9323f]
entity vector_store--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="47.6719" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="116" x="459" y="2034.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="469" y="2056.2627">&#128230;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="70" x="483" y="2056.2627">Vector Store</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="96" x="469" y="2070.0986">ChromaDB wrapper</text><!--MD5=[2a2950fbda473123fd240cac98ab0d09]
entity doc_ingest--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="116" x="455" y="1272.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="465" y="1294.2627">&#128196;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="58" x="479" y="1294.2627">Doc Ingest</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="79" x="465" y="1308.0986">PDF, DOCX, TXT</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="96" x="465" y="1321.9346">→ chunks → embed</text><!--MD5=[041600926ccb4e61c3a8a25e56a6d9c6]
entity data_ingest--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="111" x="308.5" y="1272.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="318.5" y="1294.2627">&#128202;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="61" x="332.5" y="1294.2627">Data Ingest</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="54" x="318.5" y="1308.0986">CSV, Excel</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="318.5" y="1321.9346">→ validate → store</text><!--MD5=[7a603111606425ec6ae263a7f93634a1]
entity sqlite--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="103.0156" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="145" x="63.5" y="2236.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="17" x="73.5" y="2258.2627">&#128452;️</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="36" x="93.5" y="2258.2627">SQLite</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="48" x="73.5" y="2272.0986">Data Lake</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="41" x="73.5" y="2285.9346">• Cases</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="75" x="73.5" y="2299.7705">• ArtifactPacks</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="73.5" y="2313.6064">• Execution Metadata</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="125" x="73.5" y="2327.4424">• Suppliers, Spend, SLAs</text><!--MD5=[517a3f92df6edbb3e5cf89f46e19ead8]
entity chromadb--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="75.3438" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="139" x="399.5" y="2250.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="8" x="409.5" y="2272.2627">&#129522;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="58" x="420.5" y="2272.2627">ChromaDB</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="62" x="409.5" y="2286.0986">Vector Store</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="119" x="409.5" y="2299.9346">• Document embeddings</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="409.5" y="2313.7705">• Semantic search</text><!--MD5=[82f23cda116f7491e2ad662b9686858a]
entity files--><rect fill="#FEFECE" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#000000;stroke-width:2.0;" width="121" x="243.5" y="2257.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="253.5" y="2278.7627">&#128193;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="26" x="267.5" y="2278.7627">Files</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="101" x="253.5" y="2292.5986">Uploaded documents</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="90" x="253.5" y="2306.4346">Synthetic test data</text><!--MD5=[576713d34b70cd01e0fe64aa18bc23e4]
entity human--><rect fill="#FFEBEE" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#C62828;stroke-width:2.0;" width="147" x="2225.5" y="229.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="45" x="2276.5" y="250.7627">«human»</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="2235.5" y="264.5986">&#128100;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="113" x="2249.5" y="264.5986">Procurement Officer</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="118" x="2235.5" y="278.4346">(Human Decision-Maker)</text><!--MD5=[363cc6da13d8bcdcb0851ce1cf6e8377]
entity llm--><rect fill="#E8E8E8" filter="url(#fdhsufw0hmxbo)" height="61.5078" rx="5" ry="5" style="stroke:#999999;stroke-width:2.0;" width="109" x="2114.5" y="2257.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="52" x="2143" y="2278.7627">«external»</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="2124.5" y="2292.5986">&#129302;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="75" x="2138.5" y="2292.5986">OpenAI GPT-4</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="71" x="2124.5" y="2306.4346">(LLM Provider)</text><path d="M2507,644.3438 L2507,741.1953 A5,5 0 0 0 2512,746.1953 L2710,746.1953 A5,5 0 0 0 2715,741.1953 L2715,649.3438 L2705,639.3438 L2512,639.3438 A5,5 0 0 0 2507,644.3438 " fill="#FBFB77" filter="url(#fdhsufw0hmxbo)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2705,639.3438 L2705,646.8438 A2.5,2.5 0 0 0 2707.5,649.3438 L2715,649.3438 L2705,639.3438 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="147" x="2513" y="655.7627">Hybrid Intent Classification</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="186" x="2513" y="669.5986">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="174" x="2513" y="683.4346">1. Rule-based (fast, 80-90% cases)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="168" x="2513" y="697.2705">2. LLM fallback (ambiguous cases)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="172" x="2513" y="711.1064">3. Two-level: UserGoal + WorkType</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="187" x="2513" y="724.9424">4. Context-aware (DTP stage, outputs)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="2513" y="738.7783">5. Cached results</text><path d="M2032.5,1640.3438 L2032.5,1751.0313 A5,5 0 0 0 2037.5,1756.0313 L2234.5,1756.0313 A5,5 0 0 0 2239.5,1751.0313 L2239.5,1645.3438 L2229.5,1635.3438 L2037.5,1635.3438 A5,5 0 0 0 2032.5,1640.3438 " fill="#FBFB77" filter="url(#fdhsufw0hmxbo)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2229.5,1635.3438 L2229.5,1642.8438 A2.5,2.5 0 0 0 2232,1645.3438 L2239.5,1645.3438 L2229.5,1635.3438 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="138" x="2038.5" y="1651.7627">Task Execution Hierarchy</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="186" x="2038.5" y="1665.5986">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="142" x="2038.5" y="1679.4346">All agents follow same order:</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="110" x="2038.5" y="1693.2705">1. Rules (deterministic)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="134" x="2038.5" y="1707.1064">2. Retrieval (ground in data)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="111" x="2038.5" y="1720.9424">3. Analytics (calculate)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="101" x="2038.5" y="1734.7783">4. LLM (narrate only)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="101" x="2038.5" y="1748.6143">⚠️ Never skip steps</text><path d="M1790.5,840.3438 L1790.5,951.0313 A5,5 0 0 0 1795.5,956.0313 L1992.5,956.0313 A5,5 0 0 0 1997.5,951.0313 L1997.5,845.3438 L1987.5,835.3438 L1795.5,835.3438 A5,5 0 0 0 1790.5,840.3438 " fill="#FBFB77" filter="url(#fdhsufw0hmxbo)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1987.5,835.3438 L1987.5,842.8438 A2.5,2.5 0 0 0 1990,845.3438 L1997.5,845.3438 L1987.5,835.3438 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="130" x="1796.5" y="851.7627">Supervisor Governance</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="186" x="1796.5" y="865.5986">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="150" x="1796.5" y="879.4346">• ONLY component that writes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="51" x="1802.5" y="893.2705">case state</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="121" x="1796.5" y="907.1064">• Validates all transitions</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="134" x="1796.5" y="920.9424">• Enforces human approval</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="128" x="1796.5" y="934.7783">• Blocks invalid DTP jumps</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="92" x="1796.5" y="948.6143">• Logs all changes</text><path d="M1790.5,1626.8438 L1790.5,1765.2031 A5,5 0 0 0 1795.5,1770.2031 L1992.5,1770.2031 A5,5 0 0 0 1997.5,1765.2031 L1997.5,1631.8438 L1987.5,1621.8438 L1795.5,1621.8438 A5,5 0 0 0 1790.5,1626.8438 " fill="#FBFB77" filter="url(#fdhsufw0hmxbo)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1987.5,1621.8438 L1987.5,1629.3438 A2.5,2.5 0 0 0 1990,1631.8438 L1997.5,1631.8438 L1987.5,1621.8438 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="85" x="1796.5" y="1638.2627">Artifact System</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="186" x="1796.5" y="1652.0986">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="137" x="1796.5" y="1665.9346">• ArtifactPacks with multiple</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="40" x="1802.5" y="1679.7705">artifacts</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="152" x="1796.5" y="1693.6064">• Verification status (VERIFIED/</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="108" x="1802.5" y="1707.4424">PARTIAL/UNVERIFIED)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="117" x="1796.5" y="1721.2783">• Grounding references</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="146" x="1796.5" y="1735.1143">• Execution metadata (tokens,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="1802.5" y="1748.9502">costs, task details)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="72" x="1796.5" y="1762.7861">• Full audit trail</text><path d="M2195.5,66.3438 L2195.5,163.1953 A5,5 0 0 0 2200.5,168.1953 L2295,168.1953 L2299,229.2638 L2303,168.1953 L2397.5,168.1953 A5,5 0 0 0 2402.5,163.1953 L2402.5,71.3438 L2392.5,61.3438 L2200.5,61.3438 A5,5 0 0 0 2195.5,66.3438 " fill="#FBFB77" filter="url(#fdhsufw0hmxbo)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2392.5,61.3438 L2392.5,68.8438 A2.5,2.5 0 0 0 2395,71.3438 L2402.5,71.3438 L2392.5,61.3438 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="106" x="2201.5" y="77.7627">Human-in-the-Loop</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="186" x="2201.5" y="91.5986">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="146" x="2201.5" y="105.4346">✅ Approve → Advance stage</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="141" x="2201.5" y="119.2705">✏️ Edit → Modify &amp; resubmit</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="124" x="2201.5" y="133.1064">❌ Reject → Stay at stage</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="2204.5" y="146.9424"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="131" x="2201.5" y="160.7783">AI advises, Human decides</text><!--MD5=[be91230b1f798049f038b9378dd1c98d]
link human to copilot--><path d="M2317.56,291.5138 C2338.86,326.1138 2373.89,383.0438 2397.68,421.6937 " fill="none" id="human-to-copilot" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="2400.52,426.3138,2399.2189,416.5512,2397.9035,422.053,2392.4017,420.7376,2400.52,426.3138" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="78" x="2366.5" y="340.7627">Asks questions,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="87" x="2362" y="354.5986">Approves/Rejects</text><!--MD5=[5ea3f2550e3ee438cfa310b4849842cc]
link copilot to human--><path d="M2447.14,426.2137 C2463.86,395.7838 2479.59,352.5638 2458,321.3438 C2439.6,294.7337 2407.8,279.9138 2377.45,271.6638 " fill="none" id="copilot-to-human" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="2372.59,270.3938,2380.2962,276.5268,2377.4296,271.65,2382.3063,268.7834,2372.59,270.3938" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="2469" y="333.7627">Recommendations,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="88" x="2470.5" y="347.5986">Evidence, Pending</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="44" x="2492.5" y="361.4346">Approval</text><!--MD5=[c206d04f5c05282be3b9082ddffebc94]
link human to dashboard--><path d="M2225.4,277.2238 C2196.52,286.3438 2164.7,300.3038 2141,321.3438 C2108.82,349.9037 2088.46,395.8438 2077.42,427.5838 " fill="none" id="human-to-dashboard" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="2075.72,432.5538,2082.4132,425.3287,2077.3354,427.8219,2074.8422,422.7441,2075.72,432.5538" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="68" x="2142" y="340.7627">Views cases,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="62" x="2145" y="354.5986">selects case</text><!--MD5=[2d46e724c441994b3943421d562ace59]
link human to knowledge--><path d="M2251.44,291.4637 C2241.96,299.8938 2233.3,309.9237 2228,321.3438 C2212.27,355.2338 2222.59,398.1138 2233.8,427.7338 " fill="none" id="human-to-knowledge" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="2235.75,432.7338,2236.2204,422.8961,2233.9398,428.0729,2228.763,425.7924,2235.75,432.7338" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="95" x="2229" y="340.7627">Uploads documents</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="54" x="2249.5" y="354.5986">&amp; data files</text><!--MD5=[7f8e824fe9aa7994c2e2d6c4b588942a]
link dashboard to api_client--><path d="M2097.14,494.9838 C2139.37,537.2137 2215.91,613.7538 2260.08,657.9237 " fill="none" id="dashboard-to-api_client" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="2263.73,661.5738,2260.1945,652.3814,2260.1945,658.0382,2254.5376,658.0382,2263.73,661.5738" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a530ac22912fc87b597c3c1d0d86ddc6]
link copilot to api_client--><path d="M2402.13,501.5638 C2377.71,544.5438 2337.57,615.1737 2313.67,657.2238 " fill="none" id="copilot-to-api_client" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="2311.13,661.7037,2319.0496,655.8489,2313.5969,657.3547,2312.0911,651.9019,2311.13,661.7037" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d87dbe85e23d88c743093ac364526ad0]
link knowledge to api_client--><path d="M2255.84,494.9838 C2263.95,536.7938 2278.57,612.2238 2287.17,656.5838 " fill="none" id="knowledge-to-api_client" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="2288.13,661.5738,2290.3356,651.975,2287.1741,656.666,2282.4832,653.5044,2288.13,661.5738" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[e4218dc8576b5f4727381931811678d0]
link api_client to api--><path d="M2219.81,709.6538 C2117.6,732.4137 1928.44,778.0438 1773,835.3438 C1751.99,843.0938 1729.69,853.0138 1709.79,862.5338 " fill="none" id="api_client-to-api" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1705.06,864.8138,1714.9044,864.5172,1709.5658,862.6464,1711.4366,857.3078,1705.06,864.8138" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="70" x="1947.5" y="788.7627">REST API calls</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="79" x="1943" y="802.5986">or Direct imports</text><!--MD5=[a036f675a3f9fa022f781fbacfeb422f]
link api to case_svc--><path d="M1658.97,927.0938 C1667.59,954.3638 1674.48,994.1038 1654,1020.3438 C1621.03,1062.6038 1471.44,1086.9038 1383.03,1097.8238 " fill="none" id="api-to-case_svc" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1377.82,1098.4638,1387.2344,1101.3566,1382.784,1097.8646,1386.2759,1093.4142,1377.82,1098.4638" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="56" x="1667" y="1008.2627">Case CRUD</text><!--MD5=[34b35cf27b79f55eb3f87c4269c791a5]
link api to chat_svc--><path d="M1620.7,926.9637 C1589.06,963.0938 1539.82,1019.0338 1537,1020.3438 C1506.96,1034.3038 1269.57,1015.6038 1239,1028.3438 C1220.52,1036.0438 1203.83,1050.1538 1190.53,1064.1738 " fill="none" id="api-to-chat_svc" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1186.87,1068.1238,1195.9276,1064.2558,1190.2744,1064.4618,1190.0685,1058.8087,1186.87,1068.1238" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="75" x="1569" y="1008.2627">Chat messages</text><!--MD5=[98ddd2b50bfd18f9b858b5fdb48551ea]
link api to ingest_svc--><path d="M1582.46,926.8838 C1561.31,936.6637 1537.68,947.5238 1516,957.3438 C1453.1,985.8238 1441.34,1005.1138 1374,1020.3438 C1342.13,1027.5538 1110.28,1016.0438 1080,1028.3438 C1058.24,1037.1838 1038.67,1054.5138 1024,1070.4438 " fill="none" id="api-to-ingest_svc" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1020.37,1074.4638,1029.3724,1070.469,1023.7227,1070.7544,1023.4374,1065.1047,1020.37,1074.4638" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="57" x="1459" y="1008.2627">File uploads</text><!--MD5=[bea09dea38a14a3a4a71b2625c02a584]
link chat_svc to router--><path d="M1187.37,1068.0238 C1201.17,1052.9438 1219.09,1037.0238 1239,1028.3438 C1252.77,1022.3438 1362.87,1030.4338 1374,1020.3438 C1454.36,947.5138 1430.73,871.1238 1378,776.3438 C1370.62,763.0838 1360.14,751.2538 1348.6,740.9838 " fill="none" id="chat_svc-to-router" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1344.64,737.5638,1348.8343,746.4749,1348.4232,740.833,1354.065,740.4218,1344.64,737.5638" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="70" x="1427" y="893.7627">User message</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="45" x="1439.5" y="907.5986">+ context</text><!--MD5=[a002d5a47346dcc4c939bf650a561910]
link router to state_mgr--><path d="M1245.83,737.4537 C1225.93,771.9337 1198.35,819.7238 1178.82,853.5738 " fill="none" id="router-to-state_mgr" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1176.23,858.0538,1184.195,852.2608,1178.7307,853.724,1177.2674,848.2597,1176.23,858.0538" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="45" x="1222" y="788.7627">Validates</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="49" x="1220" y="802.5986">DTP stage</text><!--MD5=[fc3b8b9163cc87155d5579adec3990e2]
link router to planner--><path d="M1279.25,737.4537 C1286.15,773.9537 1295.87,825.3738 1302.3,859.3838 " fill="none" id="router-to-planner" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1303.3,864.6837,1305.5594,855.0976,1302.3717,859.7707,1297.6985,856.5829,1303.3,864.6837" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="77" x="1292" y="788.7627">Two-level intent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="67" x="1297" y="802.5986">→ Action Plan</text><!--MD5=[5a5284d5cd3ddfdefc1ea6ecb5db0fef]
link planner to chat_svc--><path d="M1308.45,926.8738 C1306.26,954.9637 1298.52,996.1338 1273,1020.3438 C1261.74,1031.0238 1252.65,1020.9437 1239,1028.3438 C1222.17,1037.4738 1206.32,1051.0838 1193.24,1064.3038 " fill="none" id="planner-to-chat_svc" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1189.63,1068.0238,1198.7715,1064.3586,1193.1152,1064.4386,1193.0352,1058.7823,1189.63,1068.0238" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="70" x="1295" y="1008.2627">Agent + Tasks</text><!--MD5=[26b4aa7942397f83941634b651e9e9c8]
link chat_svc to signal_agent--><path d="M1148.29,1143.4538 C1144.63,1162.1638 1143,1185.0038 1150,1204.3438 C1151.32,1207.9838 1175.4,1236.7338 1197.12,1262.2338 " fill="none" id="chat_svc-to-signal_agent" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1200.59,1266.3038,1197.8079,1256.856,1197.3513,1262.4944,1191.7129,1262.0379,1200.59,1266.3038" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="38" x="1170" y="1187.7627">DTP-01:</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="76" x="1151" y="1201.5986">Signal detection</text><!--MD5=[790fe956f73270b284081bad409f2225]
link chat_svc to supplier_agent--><path d="M1120.41,1143.6538 C1108.35,1153.0438 1094.41,1161.9938 1080,1167.3438 C1051.21,1178.0438 966.49,1156.7938 942,1175.3438 C915.64,1195.3038 904.97,1232.0438 900.71,1260.9738 " fill="none" id="chat_svc-to-supplier_agent" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="899.98,1266.2738,905.1518,1257.8921,900.6511,1261.319,897.2242,1256.8183,899.98,1266.2738" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="38" x="963" y="1187.7627">DTP-02:</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="78" x="943" y="1201.5986">Supplier scoring</text><!--MD5=[a2f7feb1f54c3b7f363cea3f8fd777ae]
link chat_svc to rfx_agent--><path d="M1198.17,1143.6138 C1210.37,1153.0038 1224.47,1161.9538 1239,1167.3438 C1265.51,1177.1738 1338.27,1169.7838 1366,1175.3438 C1415.34,1185.2338 1431.01,1184.6138 1473,1212.3438 C1495.53,1227.2238 1515.94,1249.7038 1530.76,1268.5338 " fill="none" id="chat_svc-to-rfx_agent" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1534.03,1272.7338,1531.6548,1263.1756,1530.9573,1268.7893,1525.3436,1268.0919,1534.03,1272.7338" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="38" x="1469.5" y="1187.7627">DTP-03:</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59" x="1459" y="1201.5986">RFx drafting</text><!--MD5=[3949901e9e66e03116a57fa966d1a22c]
link chat_svc to negotiation_agent--><path d="M1118.21,1143.5638 C1106.54,1152.4838 1093.34,1161.2138 1080,1167.3438 C1064.32,1174.5438 1052.87,1161.9438 1042,1175.3438 C1022.48,1199.4038 1030.86,1234.4138 1042.8,1261.6638 " fill="none" id="chat_svc-to-negotiation_agent" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1044.9,1266.3138,1044.8429,1256.4651,1042.8428,1261.7566,1037.5513,1259.7565,1044.9,1266.3138" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="38" x="1070.5" y="1187.7627">DTP-04:</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="93" x="1043" y="1201.5986">Negotiation support</text><!--MD5=[f6ed7feefbf401a9e56c9760c6e49598]
link chat_svc to contract_agent--><path d="M1197.77,1143.3638 C1225.65,1169.3038 1259.73,1200.2338 1268,1204.3438 C1284.63,1212.6038 1292.83,1203.2238 1309,1212.3438 C1330.46,1224.4538 1349.33,1244.2138 1363.55,1262.1938 " fill="none" id="chat_svc-to-contract_agent" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1366.69,1266.2338,1364.3148,1256.6756,1363.6173,1262.2893,1358.0036,1261.5919,1366.69,1266.2338" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="38" x="1296" y="1187.7627">DTP-05:</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="92" x="1269" y="1201.5986">Contract extraction</text><!--MD5=[cb406067b9c1c40a6f6cd73292aca573]
link chat_svc to impl_agent--><path d="M1120.91,1143.6138 C1108.77,1153.1238 1094.65,1162.1438 1080,1167.3438 C1050.25,1177.8938 822.13,1157.6238 796,1175.3438 C767.61,1194.5938 753.79,1231.8238 747.11,1261.1038 " fill="none" id="chat_svc-to-impl_agent" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="746.02,1266.1038,751.855,1258.1695,747.091,1261.2198,744.0407,1256.4558,746.02,1266.1038" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="38" x="834.5" y="1187.7627">DTP-06:</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="113" x="797" y="1201.5986">Implementation planning</text><!--MD5=[943f2ad30c56fcc303801e409762ca26]
link signal_agent to task_rules--><path d="M1270.16,1341.3438 C1282.06,1350.7337 1295.81,1359.7438 1310,1365.3438 C1346.12,1379.5938 1361.45,1357.7238 1397,1373.3438 C1414.57,1381.0638 1411.56,1394.3338 1429,1402.3438 C1455.05,1414.3038 1466.7,1398.9438 1493,1410.3438 C1519.48,1421.8238 1544.47,1442.4837 1562.96,1460.4438 " fill="none" id="signal_agent-to-task_rules" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1566.57,1463.9938,1562.9602,1454.8303,1563.006,1460.487,1557.3493,1460.5328,1566.57,1463.9938" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="39" x="1430" y="1392.7627">1. Rules</text><!--MD5=[74dc2fe558412cde636bbbc096127532]
link supplier_agent to task_rules--><path d="M936.1,1341.5838 C948.24,1351.0938 962.35,1360.1238 977,1365.3438 C1031.03,1384.5938 1181.81,1351.8738 1235,1373.3438 C1252.8,1380.5237 1249.22,1395.1238 1267,1402.3438 C1313.56,1421.2537 1446.05,1392.4238 1493,1410.3438 C1520.37,1420.7838 1545.7,1441.8938 1564.14,1460.3338 " fill="none" id="supplier_agent-to-task_rules" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1567.74,1463.9837,1564.2787,1454.7631,1564.2331,1460.4198,1558.5764,1460.3742,1567.74,1463.9837" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="39" x="1268" y="1392.7627">1. Rules</text><!--MD5=[363da34cf2c605117de3e8ee9d7ae014]
link rfx_agent to task_rules--><path d="M1620.3,1325.5838 C1642.62,1336.1638 1665.18,1351.5338 1678,1373.3438 C1695.97,1403.9138 1669.82,1436.8738 1642.08,1460.6638 " fill="none" id="rfx_agent-to-task_rules" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1637.98,1464.1038,1647.4498,1461.3977,1641.8153,1460.8958,1642.3171,1455.2613,1637.98,1464.1038" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="39" x="1684" y="1392.7627">1. Rules</text><!--MD5=[0672238f0ec3be0568f7224f0fd4cc5a]
link negotiation_agent to task_rules--><path d="M1109.62,1341.4338 C1123.32,1350.9338 1139.06,1360.0037 1155,1365.3438 C1188.97,1376.7238 1282.91,1359.6238 1316,1373.3438 C1333.73,1380.6938 1330.29,1394.9438 1348,1402.3438 C1377.78,1414.7838 1462.96,1398.5438 1493,1410.3438 C1520.26,1421.0538 1545.59,1442.1638 1564.07,1460.5438 " fill="none" id="negotiation_agent-to-task_rules" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1567.67,1464.1738,1564.1717,1454.9671,1564.1488,1460.6239,1558.492,1460.601,1567.67,1464.1738" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="39" x="1349" y="1392.7627">1. Rules</text><!--MD5=[c8349f64da31b1c95125ca3f7e3a20b5]
link contract_agent to task_rules--><path d="M1439.85,1341.3638 C1452.56,1351.3938 1466.04,1362.4938 1478,1373.3438 C1508.59,1401.0938 1540.91,1435.2537 1563.64,1460.1938 " fill="none" id="contract_agent-to-task_rules" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1567.21,1464.1238,1564.1247,1454.7706,1563.8502,1460.4208,1558.2,1460.1463,1567.21,1464.1238" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="39" x="1508" y="1392.7627">1. Rules</text><!--MD5=[7ec6ff4238f333e44f3a72eb21b522ef]
link impl_agent to task_rules--><path d="M778.53,1341.6438 C790.51,1351.1638 804.47,1360.1738 819,1365.3438 C854.08,1377.8238 1119.42,1359.5338 1154,1373.3438 C1171.82,1380.4638 1168.18,1395.2038 1186,1402.3438 C1217.67,1415.0338 1461.06,1398.3238 1493,1410.3438 C1520.62,1420.7337 1546.11,1442.0738 1564.58,1460.6438 " fill="none" id="impl_agent-to-task_rules" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1568.18,1464.3238,1564.7375,1455.0961,1564.6804,1460.7527,1559.0238,1460.6955,1568.18,1464.3238" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="39" x="1187" y="1392.7627">1. Rules</text><!--MD5=[7756119cb20828552dac7118d9281ef1]
link task_rules to task_retrieval--><path d="M1593.7,1526.4938 C1593.34,1562.1538 1592.74,1621.4538 1592.36,1659.3138 " fill="none" id="task_rules-to-task_retrieval" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1592.3,1664.7337,1596.377,1655.7684,1592.3429,1659.7339,1588.3773,1655.6998,1592.3,1664.7337" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="54" x="1594" y="1582.2627">2. Retrieval</text><!--MD5=[7d487bcbef6fca2d9b4667b77b661824]
link task_retrieval to task_analytics--><path d="M1592.86,1726.9338 C1593.95,1765.1338 1595.83,1830.9538 1596.99,1871.5038 " fill="none" id="task_retrieval-to-task_analytics" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1597.14,1876.8138,1600.8813,1867.7032,1596.9972,1871.8158,1592.8846,1867.9317,1597.14,1876.8138" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="57" x="1596" y="1819.2627">3. Analytics</text><!--MD5=[17d9e8f0180cdfb514eb0354be40ea4d]
link task_analytics to task_llm--><path d="M1598.61,1938.9938 C1599.09,1963.1338 1599.78,1997.0238 1600.29,2022.4438 " fill="none" id="task_analytics-to-task_llm" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1600.39,2027.7337,1604.2092,2018.6556,1600.29,2022.7347,1596.2108,2018.8155,1600.39,2027.7337" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="32" x="1610.5" y="1981.2627">4. LLM</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="53" x="1600" y="1995.0986">(if needed)</text><!--MD5=[86a09605554f2a283bfd8ab2523b3c31]
link task_retrieval to retriever--><path d="M1559.73,1727.0738 C1541.51,1742.3938 1517.52,1759.8338 1493,1769.8438 C1324.31,1838.7138 759.61,1888.0438 577.29,1902.4837 " fill="none" id="task_retrieval-to-retriever" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="572.27,1902.8838,581.5611,1906.1512,577.254,1902.4839,580.9213,1898.1768,572.27,1902.8838" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="86" x="1379" y="1819.2627">Query documents</text><!--MD5=[4c07ac76b67010bc8c59d67f89b66646]
link retriever to vector_store--><path d="M519.39,1938.9938 C518.86,1965.4638 518.09,2003.6738 517.57,2029.5638 " fill="none" id="retriever-to-vector_store" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="517.47,2034.5738,521.6746,2025.6675,517.5843,2029.5751,513.6767,2025.4847,517.47,2034.5738" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="81" x="519" y="1988.2627">Semantic search</text><!--MD5=[d6f5dd3331d9fa0a83a7de4e40d8a450]
link vector_store to chromadb--><path d="M512.13,2082.9137 C504.08,2121.0538 487.89,2197.8138 477.8,2245.6638 " fill="none" id="vector_store-to-chromadb" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="476.72,2250.7738,482.5106,2242.807,477.7637,2245.8839,474.6869,2241.137,476.72,2250.7738" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="64" x="499" y="2165.2627">Vector query</text><!--MD5=[09184bf0eeb39c321957df8e7ae1fdb8]
link task_retrieval to sqlite--><path d="M1560.9,1727.0738 C1542.66,1742.8038 1518.28,1760.6338 1493,1769.8438 C1383.17,1809.8838 550.55,1791.0138 443,1836.8438 C275.01,1908.4338 185.86,2128.0038 152.13,2231.8338 " fill="none" id="task_retrieval-to-sqlite" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="150.56,2236.6838,157.1215,2229.3389,152.0896,2231.9235,149.505,2226.8916,150.56,2236.6838" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="107" x="291" y="1981.2627">Query structured data</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="123" x="283" y="1995.0986">(Suppliers, Spend, SLAs)</text><!--MD5=[d5d0ef5c4e0ad0a9025ef2e536d94e80]
link signal_agent to artifact_builder--><path d="M1195.44,1341.3938 C1183.52,1351.0237 1169.58,1360.1638 1155,1365.3438 C1142.12,1369.9138 672.59,1363.6038 663,1373.3438 C653.96,1382.5338 654.1,1393.0237 663,1402.3438 C676.52,1416.4938 822.56,1399.7138 839,1410.3438 C890.25,1443.4738 854.65,1493.1538 901,1532.8438 C1027.55,1641.2038 1228.01,1677.4138 1332.15,1689.2638 " fill="none" id="signal_agent-to-artifact_builder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1337.34,1689.8438,1328.8415,1684.8663,1332.3711,1689.2869,1327.9505,1692.8165,1337.34,1689.8438" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="902" y="1500.2627">Build ArtifactPack</text><!--MD5=[45395fb76d71e463a82c669ea3a1ffc6]
link supplier_agent to artifact_builder--><path d="M859.86,1341.4738 C847.72,1350.9837 833.61,1360.0338 819,1365.3438 C780.11,1379.4638 671.72,1358.7638 633,1373.3438 C563.96,1399.3438 542.78,1473.7838 587,1532.8438 C676.31,1652.1338 1153.11,1684.4338 1332.07,1692.4238 " fill="none" id="supplier_agent-to-artifact_builder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1337.28,1692.6538,1328.4595,1688.2721,1332.2846,1692.4397,1328.117,1696.2647,1337.28,1692.6538" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="588" y="1500.2627">Build ArtifactPack</text><!--MD5=[5cd3f1ea2b51fdd97bb02e3366e378ca]
link rfx_agent to artifact_builder--><path d="M1523.76,1334.9538 C1509.46,1346.7538 1491.57,1358.9738 1473,1365.3438 C1456.39,1371.0438 1169.26,1360.7737 1157,1373.3438 C1148,1382.5738 1149.87,1391.6038 1157,1402.3438 C1162.07,1409.9738 1169.4,1403.9837 1176,1410.3438 C1219.24,1452.0138 1198.2,1483.9038 1233,1532.8438 C1266.2,1579.5338 1313.87,1624.2138 1349.79,1654.7838 " fill="none" id="rfx_agent-to-artifact_builder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1353.67,1658.0638,1349.3848,1649.196,1349.8536,1654.8334,1344.2162,1655.3022,1353.67,1658.0638" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="1234" y="1500.2627">Build ArtifactPack</text><!--MD5=[79529a643adf47bff4716adad7b5b25d]
link negotiation_agent to artifact_builder--><path d="M1022.92,1341.3638 C1009.11,1351.0037 993.19,1360.1438 977,1365.3438 C959.59,1370.9338 660.77,1360.2638 648,1373.3438 C639,1382.5638 640,1392.2438 648,1402.3438 C657.64,1414.5138 669.8,1400.7438 682,1410.3438 C729.95,1448.0738 697.34,1493.5237 744,1532.8438 C833.65,1608.3938 1183.22,1664.7238 1332.17,1685.7938 " fill="none" id="negotiation_agent-to-artifact_builder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1337.38,1686.5237,1329.0277,1681.3046,1332.4291,1685.8246,1327.9091,1689.226,1337.38,1686.5237" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="745" y="1500.2627">Build ArtifactPack</text><!--MD5=[c218177ccb6628251a4db4a73a8e60f8]
link contract_agent to artifact_builder--><path d="M1351.74,1341.4538 C1339.03,1351.0938 1324.26,1360.2138 1309,1365.3438 C1292.38,1370.9238 690.32,1360.8738 678,1373.3438 C668.94,1382.5138 669,1393.1138 678,1402.3438 C690.34,1414.9938 980.36,1402.1238 996,1410.3438 C1055.57,1441.6438 1033.91,1489.0438 1085,1532.8438 C1160,1597.1438 1264.91,1644.5338 1332.66,1670.9238 " fill="none" id="contract_agent-to-artifact_builder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1337.48,1672.7838,1330.5201,1665.8153,1332.8144,1670.986,1327.6437,1673.2803,1337.48,1672.7838" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="1086" y="1500.2627">Build ArtifactPack</text><!--MD5=[abe8e97fd0fdfb604b97a3c7f8007f3d]
link impl_agent to artifact_builder--><path d="M696.8,1341.4538 C683.47,1350.7238 668.29,1359.6538 653,1365.3438 C622.83,1376.5838 612.05,1364.8138 581,1373.3438 C550.89,1381.6138 546.89,1393.3038 517,1402.3438 C506.44,1405.5338 475.15,1401.9338 468,1410.3438 C432.74,1451.8238 437.56,1487.7038 468,1532.8438 C564.77,1676.3238 1133.88,1693.3538 1332.03,1694.8938 " fill="none" id="impl_agent-to-artifact_builder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1337.21,1694.9338,1328.233,1690.8824,1332.2101,1694.9052,1328.1873,1698.8823,1337.21,1694.9338" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="469" y="1500.2627">Build ArtifactPack</text><!--MD5=[8418438e9197051364b81f2dfd8f71ff]
link signal_agent to exec_metadata--><path d="M1194.95,1341.4538 C1183.12,1350.9638 1169.34,1360.0237 1155,1365.3438 C1136.44,1372.2337 990.68,1359.0338 977,1373.3438 C968.09,1382.6638 968,1393.1238 977,1402.3438 C989.93,1415.5838 1292.74,1403.6738 1310,1410.3438 C1333.57,1419.4538 1355.29,1436.9837 1372.18,1453.6738 " fill="none" id="signal_agent-to-exec_metadata" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1375.93,1457.4438,1372.4316,1448.2372,1372.4088,1453.894,1366.7519,1453.8712,1375.93,1457.4438" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="77" x="978" y="1392.7627">Track execution</text><!--MD5=[8ec05112213d8a630edfe053e66999d9]
link supplier_agent to exec_metadata--><path d="M856.57,1341.4038 C845,1350.2238 832.02,1358.9438 819,1365.3438 C806.62,1371.4338 797.41,1362.4038 789,1373.3438 C781.15,1383.5638 779.96,1393.1638 789,1402.3438 C799.16,1412.6538 1296.48,1405.1838 1310,1410.3438 C1333.8,1419.4238 1355.69,1437.1538 1372.63,1453.9938 " fill="none" id="supplier_agent-to-exec_metadata" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1376.39,1457.7938,1372.9102,1448.5801,1372.876,1454.2369,1367.2192,1454.2026,1376.39,1457.7938" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="77" x="790" y="1392.7627">Track execution</text><!--MD5=[699d83423aab89724b3349ad4a927386]
link rfx_agent to exec_metadata--><path d="M1565.92,1335.0538 C1571.47,1356.2337 1574.23,1383.9438 1559,1402.3438 C1546.89,1416.9837 1534.35,1402.5938 1517,1410.3438 C1492.83,1421.1438 1469.09,1438.2038 1449.89,1454.1338 " fill="none" id="rfx_agent-to-exec_metadata" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1445.61,1457.7337,1455.0748,1455.0103,1449.4394,1454.5188,1449.9309,1448.8833,1445.61,1457.7337" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="77" x="1570" y="1392.7627">Track execution</text><!--MD5=[1926e273fc9461be6bae5781ebc90307]
link negotiation_agent to exec_metadata--><path d="M1021.8,1341.3938 C1008.2,1350.7737 992.67,1359.7838 977,1365.3438 C957.24,1372.3538 897.18,1357.9038 883,1373.3438 C874.28,1382.8338 873.97,1393.1438 883,1402.3438 C899.62,1419.2737 1287.85,1401.8438 1310,1410.3438 C1333.78,1419.4638 1355.68,1437.1938 1372.62,1454.0338 " fill="none" id="negotiation_agent-to-exec_metadata" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1376.38,1457.8338,1372.8817,1448.6271,1372.8588,1454.2839,1367.202,1454.261,1376.38,1457.8338" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="77" x="884" y="1392.7627">Track execution</text><!--MD5=[b29ea8b4fd529741db15abbc98a9a783]
link contract_agent to exec_metadata--><path d="M1351.25,1341.5738 C1338.64,1351.0838 1324.04,1360.1138 1309,1365.3438 C1296.5,1369.6838 1080.2,1363.8338 1071,1373.3438 C1062.04,1382.6138 1062.04,1393.0738 1071,1402.3438 C1080.24,1411.8938 1297.63,1405.4938 1310,1410.3438 C1333.52,1419.5638 1355.24,1437.1038 1372.14,1453.7838 " fill="none" id="contract_agent-to-exec_metadata" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1375.89,1457.5438,1372.373,1448.3442,1372.3616,1454.0011,1366.7048,1453.9897,1375.89,1457.5438" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="77" x="1072" y="1392.7627">Track execution</text><!--MD5=[0dbe83fbee8aa1ccfc4128decd9f9248]
link impl_agent to exec_metadata--><path d="M704.64,1341.7538 C689.32,1361.6738 678.43,1385.5638 695,1402.3438 C707,1414.5037 1294.03,1404.2737 1310,1410.3438 C1333.81,1419.3938 1355.7,1437.1238 1372.64,1453.9638 " fill="none" id="impl_agent-to-exec_metadata" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1376.4,1457.7737,1372.9202,1448.5601,1372.886,1454.2169,1367.2292,1454.1826,1376.4,1457.7737" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="77" x="696" y="1392.7627">Track execution</text><!--MD5=[9e6f65f499346533f1426e40386c1f68]
link artifact_builder to chat_svc--><path d="M1337.22,1695.5938 C1148.33,1696.7038 589.31,1691.3238 443,1591.8438 C364.76,1538.6438 367.95,1494.3738 346,1402.3438 C343.01,1389.8038 337.04,1382.6038 346,1373.3438 C364.63,1354.0838 566.88,1383.0338 587,1365.3438 C638.76,1319.8638 565.26,1262.9738 612,1212.3438 C658.58,1161.8938 693.95,1184.4838 762,1175.3438 C797.03,1170.6438 1046.67,1179.1138 1080,1167.3438 C1093.06,1162.7338 1105.68,1155.0838 1116.87,1146.7438 " fill="none" id="artifact_builder-to-chat_svc" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1120.92,1143.6438,1111.3379,1145.9206,1116.9442,1146.6757,1116.189,1152.2819,1120.92,1143.6438" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59" x="347" y="1385.7627">ArtifactPack</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="53" x="350" y="1399.5986">+ Metadata</text><!--MD5=[2e43cbb5939e5725847377c2f67dad19]
link exec_metadata to artifact_builder--><path d="M1405.7,1533.2138 C1404.5,1567.1938 1402.72,1617.5838 1401.47,1653.0538 " fill="none" id="exec_metadata-to-artifact_builder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1401.29,1658.1738,1405.596,1649.3161,1401.4613,1653.1767,1397.6007,1649.042,1401.29,1658.1738" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="81" x="1405" y="1582.2627">Include metadata</text><!--MD5=[cf97f47b7db5c1e788ae146ec3199228]
link chat_svc to state_mgr--><path d="M1129.41,1068.0238 C1115.85,1053.5038 1098.64,1038.0138 1080,1028.3438 C1063.13,1019.5938 1050.11,1034.9838 1038,1020.3438 C1011.66,988.5138 1049.05,954.5838 1088.38,930.3638 " fill="none" id="chat_svc-to-state_mgr" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1092.69,927.7538,1082.9224,929.0165,1088.419,930.3535,1087.082,935.8501,1092.69,927.7538" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="75" x="1039" y="1001.2627">Check approval</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="46" x="1053.5" y="1015.0986">required?</text><!--MD5=[69dedf3e993b39b77d59316a930488fc]
link state_mgr to chat_svc--><path d="M1154.55,933.5938 C1154.35,958.1637 1154.31,991.1937 1155,1020.3438 C1155.33,1034.2138 1155.96,1049.3538 1156.62,1062.9338 " fill="none" id="state_mgr-to-chat_svc" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1156.89,1068.2538,1160.4225,1059.0602,1156.6332,1063.2603,1152.433,1059.4711,1156.89,1068.2538" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="112" x="1156" y="998.7627">Set waiting_for_human</text><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="29" x="1197.5" y="1016.751">true</text><!--MD5=[de7e775e680aa93fb3f9995b60856c10]
link state_mgr to sqlite--><path d="M1092.82,901.4437 C853.6,919.9537 6,993.4137 6,1104.8438 C6,1104.8438 6,1104.8438 6,2059.8438 C6,2125.4138 47.22,2189.2738 83.24,2232.5638 " fill="none" id="state_mgr-to-sqlite" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="86.48,2236.4238,83.7185,2226.97,83.2496,2232.6074,77.6123,2232.1385,86.48,2236.4238" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="79" x="7" y="1575.2627">Save case state</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="69" x="12" y="1589.0986">(ONLY writer)</text><!--MD5=[387592a9ca6bc6293c3631b5b7d92b8e]
link artifact_builder to case_svc--><path d="M1337.38,1693.2038 C1157.32,1687.6438 641.52,1665.5138 492,1591.8438 C411.18,1552.0237 425.15,1492.2938 420,1402.3438 C419.26,1389.4738 411.07,1382.6438 420,1373.3438 C435.09,1357.6238 598.7,1378.6038 616,1365.3438 C672.57,1321.9938 606.77,1254.8138 664,1212.3438 C681.91,1199.0538 1451.31,1220.1938 1467,1204.3438 C1501.26,1169.7438 1437.31,1140.9538 1382.58,1123.8338 " fill="none" id="artifact_builder-to-case_svc" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1377.66,1122.3238,1385.0816,1128.7983,1382.438,1123.7972,1387.4391,1121.1536,1377.66,1122.3238" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="87" x="421" y="1392.7627">Save ArtifactPack</text><!--MD5=[8ece7f81910c558db007f6fdd8614a0f]
link case_svc to sqlite--><path d="M1377.62,1112.3238 C1593.22,1132.6238 2310,1207.2938 2310,1302.8438 C2310,1302.8438 2310,1302.8438 2310,2059.8438 C2310,2189.8638 2168.32,2148.4738 2041,2174.8438 C2016.32,2179.9538 248.89,2172.2838 226,2182.8438 C203.06,2193.4238 183.74,2213.0338 168.95,2232.4338 " fill="none" id="case_svc-to-sqlite" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="165.67,2236.8338,174.2618,2232.019,168.6632,2232.8286,167.8536,2227.23,165.67,2236.8338" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="76" x="2324.5" y="1693.7627">Persist artifacts</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="103" x="2311" y="1707.5986">+ execution metadata</text><!--MD5=[e176f8c830ee7164b0452616077be7c3]
link ingest_svc to doc_ingest--><path d="M931.63,1107.8938 C819.55,1111.0838 597.4,1123.9138 542,1175.3438 C517.02,1198.5338 511.37,1238.3838 510.96,1267.3738 " fill="none" id="ingest_svc-to-doc_ingest" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="510.94,1272.6538,514.9914,1263.6768,510.9686,1267.6538,506.9915,1263.631,510.94,1272.6538" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="54" x="543" y="1194.7627">Documents</text><!--MD5=[ad0ea54048dcacdd93f8cab8289cb31b]
link ingest_svc to data_ingest--><path d="M931.81,1107.6238 C802.01,1110.3238 516.86,1122.3038 437,1175.3438 C404.66,1196.8238 384.97,1237.8238 374.32,1267.5438 " fill="none" id="ingest_svc-to-data_ingest" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="372.56,1272.5838,379.2989,1265.4013,374.2054,1267.8622,371.7445,1262.7687,372.56,1272.5838" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="75" x="438" y="1194.7627">Structured data</text><!--MD5=[ff3530129096d5d30530c227192a89ca]
link doc_ingest to vector_store--><path d="M483.52,1335.1238 C470.42,1346.6438 454.11,1358.6138 437,1365.3438 C415.64,1373.7537 349.59,1356.4938 334,1373.3438 C151.48,1570.5938 413.76,1929.6938 494.59,2030.7438 " fill="none" id="doc_ingest-to-vector_store" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="497.84,2034.7938,495.3285,2025.2705,494.7113,2030.8936,489.0882,2030.2764,497.84,2034.7938" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="70" x="330" y="1693.7627">Embed &amp; store</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="347.5" y="1707.5986">chunks</text><!--MD5=[821ca48bacb5330347de1515fdfba385]
link data_ingest to sqlite--><path d="M308.26,1319.4338 C233.49,1342.7538 110,1396.1338 110,1494.3438 C110,1494.3438 110,1494.3438 110,2059.8438 C110,2118.6038 118.67,2185.3438 125.99,2231.2638 " fill="none" id="data_ingest-to-sqlite" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="126.83,2236.4838,129.3407,2226.9603,126.0311,2231.548,121.4434,2228.2384,126.83,2236.4838" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="79" x="111" y="1812.2627">Validate &amp; insert</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="38" x="131.5" y="1826.0986">records</text><!--MD5=[3c1d0493cc36ce2cbe4bc53743a6725e]
link doc_ingest to files--><path d="M483.94,1334.9438 C470.79,1346.5838 454.32,1358.6938 437,1365.3438 C382.55,1386.2537 359.92,1351.0838 306,1373.3438 C247.52,1397.4938 231,1431.0738 231,1494.3438 C231,1494.3438 231,1494.3438 231,1984.3438 C231,2083.6138 268.49,2196.2138 289.74,2252.0638 " fill="none" id="doc_ingest-to-files" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="291.62,2256.9538,292.1427,2247.1188,289.8347,2252.2834,284.6701,2249.9753,291.62,2256.9538" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="63" x="232" y="1819.2627">Store original</text><!--MD5=[8045d37b54a169d6cedb2683a81e19cc]
link task_llm to llm--><path d="M1662.06,2084.2938 C1771.74,2128.2338 2000.8,2219.9738 2109.41,2263.4738 " fill="none" id="task_llm-to-llm" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="2114.17,2265.3838,2107.2993,2258.3273,2109.5276,2263.5268,2104.3281,2265.7551,2114.17,2265.3838" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="67" x="1925.5" y="2158.2627">Narration only</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="146" x="1886" y="2172.0986">(after rules/retrieval/analytics)</text><!--MD5=[309b8d07722bd08f6b0ec7dd1a19f921]
link router to llm--><path d="M1365.68,699.7638 C1648.56,718.7238 2468,783.2638 2468,894.8438 C2468,894.8438 2468,894.8438 2468,2059.8438 C2468,2178.9138 2315.96,2243.8538 2228.72,2271.3138 " fill="none" id="router-to-llm" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="2223.84,2272.8338,2233.6223,2273.9772,2228.6139,2271.3473,2231.2439,2266.3389,2223.84,2272.8338" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="87" x="2477.5" y="1493.2627">LLM Classification</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="2469" y="1507.0986">(if confidence &lt; 0.85)</text><!--MD5=[9526cd0b6e4ed8e018adf26d0aae2626]
link router to GMN104--><path d="M1365.56,663.3438 C1504.4,621.7338 1772.34,547.8638 2006.5,520.8438 C2058.05,514.8938 2426.11,499.7037 2473.5,520.8438 C2525.17,543.9038 2563.05,597.7838 2585.82,639.1438 " fill="none" id="router-GMN104" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><!--MD5=[1be93d768cf396d8c2760502e46af584]
link task_rules to GMN107--><path d="M1655.32,1509.4638 C1738.85,1528.4938 1892.06,1567.4837 2015,1621.8438 C2024.09,1625.8638 2033.33,1630.4338 2042.45,1635.2838 " fill="none" id="task_rules-GMN107" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><!--MD5=[df95d606b72d8accd317815b59d4f080]
link state_mgr to GMN110--><path d="M1178.24,858.2338 C1195.43,834.2238 1221.24,805.1538 1252.5,791.5938 C1355.24,747.0138 1650.34,755.9038 1756.5,791.5938 C1783.76,800.7638 1809.91,817.7137 1831.95,835.3238 " fill="none" id="state_mgr-GMN110" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><!--MD5=[89844c9b1b73c4bea26a302cbd048af6]
link GMN113 to artifact_builder--><path d="M1790.13,1623.5438 C1717.89,1582.5037 1619.65,1545.1838 1534.5,1577.3438 C1491.85,1593.4538 1453.97,1629.9338 1429.36,1658.1938 " fill="none" id="GMN113-artifact_builder" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><rect fill="#DDDDDD" height="235.375" rx="5" ry="5" style="stroke:#000000;stroke-width:1.0;" width="208" x="2492" y="2369.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="30" x="2501" y="2388.2627">Color</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="95" x="2537" y="2388.2627">Component Type</text><rect fill="#FFEBEE" height="13.8359" style="stroke:none;stroke-width:1.0;" width="36" x="2498" y="2390.6797"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="2501" y="2402.0986"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="63" x="2537" y="2402.0986">Human Actor</text><rect fill="#E3F2FD" height="13.8359" style="stroke:none;stroke-width:1.0;" width="36" x="2498" y="2404.5156"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="2501" y="2415.9346"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="95" x="2537" y="2415.9346">Frontend (Streamlit)</text><rect fill="#E8F5E9" height="13.8359" style="stroke:none;stroke-width:1.0;" width="36" x="2498" y="2418.3516"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="2501" y="2429.7705"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="90" x="2537" y="2429.7705">Backend (FastAPI)</text><rect fill="#FFF3E0" height="13.8359" style="stroke:none;stroke-width:1.0;" width="36" x="2498" y="2432.1875"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="2501" y="2443.6064"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="126" x="2537" y="2443.6064">Supervisor (Orchestrator)</text><rect fill="#F3E5F5" height="13.8359" style="stroke:none;stroke-width:1.0;" width="36" x="2498" y="2446.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="2501" y="2457.4424"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="89" x="2537" y="2457.4424">Official Agents (7)</text><rect fill="#FFF9C4" height="13.8359" style="stroke:none;stroke-width:1.0;" width="36" x="2498" y="2459.8594"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="2501" y="2471.2783"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="2537" y="2471.2783">Task Execution Layer</text><rect fill="#ECEFF1" height="13.8359" style="stroke:none;stroke-width:1.0;" width="36" x="2498" y="2473.6953"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="2501" y="2485.1143"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="88" x="2537" y="2485.1143">Data / Persistence</text><rect fill="#E8E8E8" height="13.8359" style="stroke:none;stroke-width:1.0;" width="36" x="2498" y="2487.5313"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="2501" y="2498.9502"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="78" x="2537" y="2498.9502">External System</text><line style="stroke:#000000;stroke-width:1.0;" x1="2498" x2="2666" y1="2376.8438" y2="2376.8438"/><line style="stroke:#000000;stroke-width:1.0;" x1="2498" x2="2666" y1="2390.6797" y2="2390.6797"/><line style="stroke:#000000;stroke-width:1.0;" x1="2498" x2="2666" y1="2404.5156" y2="2404.5156"/><line style="stroke:#000000;stroke-width:1.0;" x1="2498" x2="2666" y1="2418.3516" y2="2418.3516"/><line style="stroke:#000000;stroke-width:1.0;" x1="2498" x2="2666" y1="2432.1875" y2="2432.1875"/><line style="stroke:#000000;stroke-width:1.0;" x1="2498" x2="2666" y1="2446.0234" y2="2446.0234"/><line style="stroke:#000000;stroke-width:1.0;" x1="2498" x2="2666" y1="2459.8594" y2="2459.8594"/><line style="stroke:#000000;stroke-width:1.0;" x1="2498" x2="2666" y1="2473.6953" y2="2473.6953"/><line style="stroke:#000000;stroke-width:1.0;" x1="2498" x2="2666" y1="2487.5313" y2="2487.5313"/><line style="stroke:#000000;stroke-width:1.0;" x1="2498" x2="2666" y1="2501.3672" y2="2501.3672"/><line style="stroke:#000000;stroke-width:1.0;" x1="2498" x2="2498" y1="2376.8438" y2="2501.3672"/><line style="stroke:#000000;stroke-width:1.0;" x1="2534" x2="2534" y1="2376.8438" y2="2501.3672"/><line style="stroke:#000000;stroke-width:1.0;" x1="2666" x2="2666" y1="2376.8438" y2="2501.3672"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="2501" y="2514.7861"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="126" x="2498" y="2528.6221">Key Governance Rules:</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="167" x="2498" y="2542.458">1. Supervisor is ONLY state writer</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="194" x="2498" y="2556.2939">2. Rules → Retrieval → Analytics → LLM</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="176" x="2498" y="2570.1299">3. Hybrid classification (rules + LLM)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="196" x="2498" y="2583.9658">4. Stage advancement requires approval</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="177" x="2498" y="2597.8018">5. All artifacts tracked with metadata</text><!--MD5=[1839454dd671be4cc6c86c4b16021e28]
@startuml Agentic_Sourcing_Architecture

' =============================================================================
' AGENTIC SOURCING COPILOT — SYSTEM ARCHITECTURE DIAGRAM
' =============================================================================
' 
' Purpose: Visual representation of the human-in-the-loop, multi-agent 
'          decision-support system for procurement sourcing.
'
' Version: Current (2025) - Reflects actual implementation
'
' Key Features:
'   • Hybrid Intent Classification (Rule-based + LLM fallback)
'   • 7 Official Agents with Task Execution Hierarchy
'   • Artifact System with Execution Metadata
'   • Two-Level Intent Classification (UserGoal + WorkType)
'   • Supervisor-only State Changes
'
' To render: Use PlantUML extension in VS Code/Cursor (Alt+D) or online at
'            http://www.plantuml.com/plantuml
' =============================================================================

title Agentic Sourcing Copilot - Enterprise Architecture\n//Human-in-the-Loop Multi-Agent Decision Support System//\n\n**Current Implementation** — Hybrid Classification & Artifact System

skinparam backgroundColor #FEFEFE
skinparam defaultFontSize 11
skinparam roundcorner 10
skinparam shadowing true

skinparam rectangle {
    BackgroundColor<<human>> #FFEBEE
    BorderColor<<human>> #C62828
    BorderThickness 2
    BackgroundColor<<frontend>> #E3F2FD
    BorderColor<<frontend>> #1976D2
    BorderThickness 2
    BackgroundColor<<backend>> #E8F5E9
    BorderColor<<backend>> #388E3C
    BorderThickness 2
    BackgroundColor<<supervisor>> #FFF3E0
    BorderColor<<supervisor>> #F57C00
    BorderThickness 3
    BackgroundColor<<agent>> #F3E5F5
    BorderColor<<agent>> #7B1FA2
    BorderThickness 2
    BackgroundColor<<task>> #FFF9C4
    BorderColor<<task>> #F9A825
    BorderThickness 2
    BackgroundColor<<data>> #ECEFF1
    BorderColor<<data>> #546E7A
    BorderThickness 2
    BackgroundColor<<external>> #E8E8E8
    BorderColor<<external>> #999999
    BorderThickness 2
}

' ============== EXTERNAL ACTORS ==============
rectangle "👤 **Procurement Officer**\n(Human Decision-Maker)" as human <<human>>

rectangle "🤖 **OpenAI GPT-4**\n(LLM Provider)" as llm <<external>>

' ============== FRONTEND CONTAINER ==============
package "**FRONTEND** - Streamlit UI" <<frontend>> {
    rectangle "📊 **Case Dashboard**\nCase list, metrics,\nfiltering, status view" as dashboard
    rectangle "💬 **Case Copilot**\nChat interface,\nartifact display,\naudit trail" as copilot
    rectangle "📁 **Knowledge Management**\nDocument upload,\ndata ingestion" as knowledge
    rectangle "🔌 **API Client**\nHTTP/REST communication\nor Direct imports" as api_client
}

' ============== BACKEND CONTAINER ==============
package "**BACKEND** - FastAPI Server" <<backend>> {
    
    rectangle "🌐 **REST API**\n/cases, /chat, /decisions,\n/ingest, /health" as api
    
    package "**Services Layer**" {
        rectangle "💬 **Chat Service**\nMessage processing,\nintent handling,\nresponse formatting" as chat_svc
        rectangle "📋 **Case Service**\nCase CRUD,\nartifact management,\nstate persistence" as case_svc
        rectangle "📥 **Ingestion Service**\nUpload orchestration,\nvalidation" as ingest_svc
    }
    
    package "**SUPERVISOR** - Central Orchestrator" <<supervisor>> {
        rectangle "🧠 **Intent Router**\nHybrid Classification:\n• Rule-based (fast)\n• LLM fallback (accurate)\n• Two-level (UserGoal+WorkType)" as router
        rectangle "📊 **State Manager**\nDTP stage tracking,\nvalidation, transitions,\nONLY state writer" as state_mgr
        rectangle "📋 **Action Planner**\nAgent selection,\ntask planning" as planner
    }
    
    package "**7 OFFICIAL AGENTS**" <<agent>> {
        rectangle "📡 **Sourcing Signal**\n(DTP-01)\nSignal detection,\nurgency scoring" as signal_agent
        rectangle "⭐ **Supplier Scoring**\n(DTP-02)\nEvaluation, ranking,\neligibility checks" as supplier_agent
        rectangle "📝 **RFx Draft**\n(DTP-03)\nRFI/RFP/RFQ assembly" as rfx_agent
        rectangle "🤝 **Negotiation Support**\n(DTP-04)\nLeverage analysis,\ntargets, playbook" as negotiation_agent
        rectangle "📄 **Contract Support**\n(DTP-05)\nTerm extraction,\nvalidation, handoff" as contract_agent
        rectangle "🚀 **Implementation**\n(DTP-06)\nRollout planning,\nvalue capture" as impl_agent
    }
    
    package "**TASK EXECUTION LAYER**" <<task>> {
        rectangle "1️⃣ **Rules**\nDeterministic checks,\npolicy validation" as task_rules
        rectangle "2️⃣ **Retrieval**\nChromaDB + SQLite\nquery, grounding" as task_retrieval
        rectangle "3️⃣ **Analytics**\nScoring, normalization,\ncomparison, ranking" as task_analytics
        rectangle "4️⃣ **LLM**\nNarration, summaries\n(last resort only)" as task_llm
    }
    
    package "**ARTIFACT SYSTEM**" {
        rectangle "📦 **Artifact Builder**\nPack creation,\nverification status,\ngrounding references" as artifact_builder
        rectangle "📊 **Execution Metadata**\nTokens, costs,\ntask details,\nretrieval sources" as exec_metadata
    }
    
    package "**RAG LAYER**" {
        rectangle "🔍 **Retriever**\nSemantic search,\nmetadata filter" as retriever
        rectangle "📦 **Vector Store**\nChromaDB wrapper" as vector_store
    }
    
    package "**INGESTION LAYER**" {
        rectangle "📄 **Doc Ingest**\nPDF, DOCX, TXT\n→ chunks → embed" as doc_ingest
        rectangle "📊 **Data Ingest**\nCSV, Excel\n→ validate → store" as data_ingest
    }
}

' ============== DATA LAYER ==============
package "**DATA LAYER** - Persistence" <<data>> {
    rectangle "🗄️ **SQLite**\nData Lake\n• Cases\n• ArtifactPacks\n• Execution Metadata\n• Suppliers, Spend, SLAs" as sqlite
    rectangle "🧲 **ChromaDB**\nVector Store\n• Document embeddings\n• Semantic search" as chromadb
    rectangle "📁 **Files**\nUploaded documents\nSynthetic test data" as files
}

' ============== FLOW ARROWS ==============

' Human Interaction
human - -> copilot : "Asks questions,\nApproves/Rejects"
copilot - -> human : "Recommendations,\nEvidence, Pending\nApproval"

human - -> dashboard : "Views cases,\nselects case"
human - -> knowledge : "Uploads documents\n& data files"

' Frontend to Backend
dashboard - -> api_client
copilot - -> api_client
knowledge - -> api_client
api_client - -> api : "REST API calls\nor Direct imports"

' API to Services
api - -> case_svc : "Case CRUD"
api - -> chat_svc : "Chat messages"
api - -> ingest_svc : "File uploads"

' Chat Service to Supervisor
chat_svc - -> router : "User message\n+ context"
router - -> state_mgr : "Validates\nDTP stage"
router - -> planner : "Two-level intent\n→ Action Plan"
planner - -> chat_svc : "Agent + Tasks"

' Supervisor to Agents
chat_svc - -> signal_agent : "DTP-01:\nSignal detection"
chat_svc - -> supplier_agent : "DTP-02:\nSupplier scoring"
chat_svc - -> rfx_agent : "DTP-03:\nRFx drafting"
chat_svc - -> negotiation_agent : "DTP-04:\nNegotiation support"
chat_svc - -> contract_agent : "DTP-05:\nContract extraction"
chat_svc - -> impl_agent : "DTP-06:\nImplementation planning"

' Agents execute Tasks (in order)
signal_agent - -> task_rules : "1. Rules"
supplier_agent - -> task_rules : "1. Rules"
rfx_agent - -> task_rules : "1. Rules"
negotiation_agent - -> task_rules : "1. Rules"
contract_agent - -> task_rules : "1. Rules"
impl_agent - -> task_rules : "1. Rules"

task_rules - -> task_retrieval : "2. Retrieval"
task_retrieval - -> task_analytics : "3. Analytics"
task_analytics - -> task_llm : "4. LLM\n(if needed)"

' Agents use RAG
task_retrieval - -> retriever : "Query documents"
retriever - -> vector_store : "Semantic search"
vector_store - -> chromadb : "Vector query"

' Agents query structured data
task_retrieval - -> sqlite : "Query structured data\n(Suppliers, Spend, SLAs)"

' Agents return ArtifactPacks
signal_agent - -> artifact_builder : "Build ArtifactPack"
supplier_agent - -> artifact_builder : "Build ArtifactPack"
rfx_agent - -> artifact_builder : "Build ArtifactPack"
negotiation_agent - -> artifact_builder : "Build ArtifactPack"
contract_agent - -> artifact_builder : "Build ArtifactPack"
impl_agent - -> artifact_builder : "Build ArtifactPack"

' Execution Metadata tracking
signal_agent - -> exec_metadata : "Track execution"
supplier_agent - -> exec_metadata : "Track execution"
rfx_agent - -> exec_metadata : "Track execution"
negotiation_agent - -> exec_metadata : "Track execution"
contract_agent - -> exec_metadata : "Track execution"
impl_agent - -> exec_metadata : "Track execution"

' Artifacts return to Chat Service
artifact_builder - -> chat_svc : "ArtifactPack\n+ Metadata"
exec_metadata - -> artifact_builder : "Include metadata"

' Human-in-the-Loop Checkpoint
chat_svc - -> state_mgr : "Check approval\nrequired?"
state_mgr - -> chat_svc : "Set waiting_for_human\n= true"

' State updates (ONLY Supervisor/State Manager)
state_mgr - -> sqlite : "Save case state\n(ONLY writer)"

' Artifact persistence
artifact_builder - -> case_svc : "Save ArtifactPack"
case_svc - -> sqlite : "Persist artifacts\n+ execution metadata"

' Ingestion Flow
ingest_svc - -> doc_ingest : "Documents"
ingest_svc - -> data_ingest : "Structured data"
doc_ingest - -> vector_store : "Embed & store\nchunks"
data_ingest - -> sqlite : "Validate & insert\nrecords"
doc_ingest - -> files : "Store original"

' LLM Calls (only via task_llm)
task_llm - -> llm : "Narration only\n(after rules/retrieval/analytics)"

' Hybrid Classification LLM call
router - -> llm : "LLM Classification\n(if confidence < 0.85)"

' ============== NOTES ==============
note right of router
    **Hybrid Intent Classification**
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    1. Rule-based (fast, 80-90% cases)
    2. LLM fallback (ambiguous cases)
    3. Two-level: UserGoal + WorkType
    4. Context-aware (DTP stage, outputs)
    5. Cached results
end note

note bottom of task_rules
    **Task Execution Hierarchy**
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    All agents follow same order:
    1. Rules (deterministic)
    2. Retrieval (ground in data)
    3. Analytics (calculate)
    4. LLM (narrate only)
    ⚠️ Never skip steps
end note

note right of state_mgr
    **Supervisor Governance**
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    • ONLY component that writes
      case state
    • Validates all transitions
    • Enforces human approval
    • Blocks invalid DTP jumps
    • Logs all changes
end note

note left of artifact_builder
    **Artifact System**
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    • ArtifactPacks with multiple
      artifacts
    • Verification status (VERIFIED/
      PARTIAL/UNVERIFIED)
    • Grounding references
    • Execution metadata (tokens,
      costs, task details)
    • Full audit trail
end note

note top of human
    **Human-in-the-Loop**
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    ✅ Approve → Advance stage
    ✏️ Edit → Modify & resubmit
    ❌ Reject → Stay at stage
    
    AI advises, Human decides
end note

' ============== LEGEND ==============
legend right
    |= Color |= Component Type |
    | <#FFEBEE> | Human Actor |
    | <#E3F2FD> | Frontend (Streamlit) |
    | <#E8F5E9> | Backend (FastAPI) |
    | <#FFF3E0> | Supervisor (Orchestrator) |
    | <#F3E5F5> | Official Agents (7) |
    | <#FFF9C4> | Task Execution Layer |
    | <#ECEFF1> | Data / Persistence |
    | <#E8E8E8> | External System |
    
    **Key Governance Rules:**
    1. Supervisor is ONLY state writer
    2. Rules → Retrieval → Analytics → LLM
    3. Hybrid classification (rules + LLM)
    4. Stage advancement requires approval
    5. All artifacts tracked with metadata
endlegend

@enduml

@startuml Agentic_Sourcing_Architecture


title Agentic Sourcing Copilot - Enterprise Architecture\n//Human-in-the-Loop Multi-Agent Decision Support System//\n\n**Current Implementation** — Hybrid Classification & Artifact System

skinparam backgroundColor #FEFEFE
skinparam defaultFontSize 11
skinparam roundcorner 10
skinparam shadowing true

skinparam rectangle {
    BackgroundColor<<human>> #FFEBEE
    BorderColor<<human>> #C62828
    BorderThickness 2
    BackgroundColor<<frontend>> #E3F2FD
    BorderColor<<frontend>> #1976D2
    BorderThickness 2
    BackgroundColor<<backend>> #E8F5E9
    BorderColor<<backend>> #388E3C
    BorderThickness 2
    BackgroundColor<<supervisor>> #FFF3E0
    BorderColor<<supervisor>> #F57C00
    BorderThickness 3
    BackgroundColor<<agent>> #F3E5F5
    BorderColor<<agent>> #7B1FA2
    BorderThickness 2
    BackgroundColor<<task>> #FFF9C4
    BorderColor<<task>> #F9A825
    BorderThickness 2
    BackgroundColor<<data>> #ECEFF1
    BorderColor<<data>> #546E7A
    BorderThickness 2
    BackgroundColor<<external>> #E8E8E8
    BorderColor<<external>> #999999
    BorderThickness 2
}

rectangle "👤 **Procurement Officer**\n(Human Decision-Maker)" as human <<human>>

rectangle "🤖 **OpenAI GPT-4**\n(LLM Provider)" as llm <<external>>

package "**FRONTEND** - Streamlit UI" <<frontend>> {
    rectangle "📊 **Case Dashboard**\nCase list, metrics,\nfiltering, status view" as dashboard
    rectangle "💬 **Case Copilot**\nChat interface,\nartifact display,\naudit trail" as copilot
    rectangle "📁 **Knowledge Management**\nDocument upload,\ndata ingestion" as knowledge
    rectangle "🔌 **API Client**\nHTTP/REST communication\nor Direct imports" as api_client
}

package "**BACKEND** - FastAPI Server" <<backend>> {
    
    rectangle "🌐 **REST API**\n/cases, /chat, /decisions,\n/ingest, /health" as api
    
    package "**Services Layer**" {
        rectangle "💬 **Chat Service**\nMessage processing,\nintent handling,\nresponse formatting" as chat_svc
        rectangle "📋 **Case Service**\nCase CRUD,\nartifact management,\nstate persistence" as case_svc
        rectangle "📥 **Ingestion Service**\nUpload orchestration,\nvalidation" as ingest_svc
    }
    
    package "**SUPERVISOR** - Central Orchestrator" <<supervisor>> {
        rectangle "🧠 **Intent Router**\nHybrid Classification:\n• Rule-based (fast)\n• LLM fallback (accurate)\n• Two-level (UserGoal+WorkType)" as router
        rectangle "📊 **State Manager**\nDTP stage tracking,\nvalidation, transitions,\nONLY state writer" as state_mgr
        rectangle "📋 **Action Planner**\nAgent selection,\ntask planning" as planner
    }
    
    package "**7 OFFICIAL AGENTS**" <<agent>> {
        rectangle "📡 **Sourcing Signal**\n(DTP-01)\nSignal detection,\nurgency scoring" as signal_agent
        rectangle "⭐ **Supplier Scoring**\n(DTP-02)\nEvaluation, ranking,\neligibility checks" as supplier_agent
        rectangle "📝 **RFx Draft**\n(DTP-03)\nRFI/RFP/RFQ assembly" as rfx_agent
        rectangle "🤝 **Negotiation Support**\n(DTP-04)\nLeverage analysis,\ntargets, playbook" as negotiation_agent
        rectangle "📄 **Contract Support**\n(DTP-05)\nTerm extraction,\nvalidation, handoff" as contract_agent
        rectangle "🚀 **Implementation**\n(DTP-06)\nRollout planning,\nvalue capture" as impl_agent
    }
    
    package "**TASK EXECUTION LAYER**" <<task>> {
        rectangle "1️⃣ **Rules**\nDeterministic checks,\npolicy validation" as task_rules
        rectangle "2️⃣ **Retrieval**\nChromaDB + SQLite\nquery, grounding" as task_retrieval
        rectangle "3️⃣ **Analytics**\nScoring, normalization,\ncomparison, ranking" as task_analytics
        rectangle "4️⃣ **LLM**\nNarration, summaries\n(last resort only)" as task_llm
    }
    
    package "**ARTIFACT SYSTEM**" {
        rectangle "📦 **Artifact Builder**\nPack creation,\nverification status,\ngrounding references" as artifact_builder
        rectangle "📊 **Execution Metadata**\nTokens, costs,\ntask details,\nretrieval sources" as exec_metadata
    }
    
    package "**RAG LAYER**" {
        rectangle "🔍 **Retriever**\nSemantic search,\nmetadata filter" as retriever
        rectangle "📦 **Vector Store**\nChromaDB wrapper" as vector_store
    }
    
    package "**INGESTION LAYER**" {
        rectangle "📄 **Doc Ingest**\nPDF, DOCX, TXT\n→ chunks → embed" as doc_ingest
        rectangle "📊 **Data Ingest**\nCSV, Excel\n→ validate → store" as data_ingest
    }
}

package "**DATA LAYER** - Persistence" <<data>> {
    rectangle "🗄️ **SQLite**\nData Lake\n• Cases\n• ArtifactPacks\n• Execution Metadata\n• Suppliers, Spend, SLAs" as sqlite
    rectangle "🧲 **ChromaDB**\nVector Store\n• Document embeddings\n• Semantic search" as chromadb
    rectangle "📁 **Files**\nUploaded documents\nSynthetic test data" as files
}


human - -> copilot : "Asks questions,\nApproves/Rejects"
copilot - -> human : "Recommendations,\nEvidence, Pending\nApproval"

human - -> dashboard : "Views cases,\nselects case"
human - -> knowledge : "Uploads documents\n& data files"

dashboard - -> api_client
copilot - -> api_client
knowledge - -> api_client
api_client - -> api : "REST API calls\nor Direct imports"

api - -> case_svc : "Case CRUD"
api - -> chat_svc : "Chat messages"
api - -> ingest_svc : "File uploads"

chat_svc - -> router : "User message\n+ context"
router - -> state_mgr : "Validates\nDTP stage"
router - -> planner : "Two-level intent\n→ Action Plan"
planner - -> chat_svc : "Agent + Tasks"

chat_svc - -> signal_agent : "DTP-01:\nSignal detection"
chat_svc - -> supplier_agent : "DTP-02:\nSupplier scoring"
chat_svc - -> rfx_agent : "DTP-03:\nRFx drafting"
chat_svc - -> negotiation_agent : "DTP-04:\nNegotiation support"
chat_svc - -> contract_agent : "DTP-05:\nContract extraction"
chat_svc - -> impl_agent : "DTP-06:\nImplementation planning"

signal_agent - -> task_rules : "1. Rules"
supplier_agent - -> task_rules : "1. Rules"
rfx_agent - -> task_rules : "1. Rules"
negotiation_agent - -> task_rules : "1. Rules"
contract_agent - -> task_rules : "1. Rules"
impl_agent - -> task_rules : "1. Rules"

task_rules - -> task_retrieval : "2. Retrieval"
task_retrieval - -> task_analytics : "3. Analytics"
task_analytics - -> task_llm : "4. LLM\n(if needed)"

task_retrieval - -> retriever : "Query documents"
retriever - -> vector_store : "Semantic search"
vector_store - -> chromadb : "Vector query"

task_retrieval - -> sqlite : "Query structured data\n(Suppliers, Spend, SLAs)"

signal_agent - -> artifact_builder : "Build ArtifactPack"
supplier_agent - -> artifact_builder : "Build ArtifactPack"
rfx_agent - -> artifact_builder : "Build ArtifactPack"
negotiation_agent - -> artifact_builder : "Build ArtifactPack"
contract_agent - -> artifact_builder : "Build ArtifactPack"
impl_agent - -> artifact_builder : "Build ArtifactPack"

signal_agent - -> exec_metadata : "Track execution"
supplier_agent - -> exec_metadata : "Track execution"
rfx_agent - -> exec_metadata : "Track execution"
negotiation_agent - -> exec_metadata : "Track execution"
contract_agent - -> exec_metadata : "Track execution"
impl_agent - -> exec_metadata : "Track execution"

artifact_builder - -> chat_svc : "ArtifactPack\n+ Metadata"
exec_metadata - -> artifact_builder : "Include metadata"

chat_svc - -> state_mgr : "Check approval\nrequired?"
state_mgr - -> chat_svc : "Set waiting_for_human\n= true"

state_mgr - -> sqlite : "Save case state\n(ONLY writer)"

artifact_builder - -> case_svc : "Save ArtifactPack"
case_svc - -> sqlite : "Persist artifacts\n+ execution metadata"

ingest_svc - -> doc_ingest : "Documents"
ingest_svc - -> data_ingest : "Structured data"
doc_ingest - -> vector_store : "Embed & store\nchunks"
data_ingest - -> sqlite : "Validate & insert\nrecords"
doc_ingest - -> files : "Store original"

task_llm - -> llm : "Narration only\n(after rules/retrieval/analytics)"

router - -> llm : "LLM Classification\n(if confidence < 0.85)"

note right of router
    **Hybrid Intent Classification**
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    1. Rule-based (fast, 80-90% cases)
    2. LLM fallback (ambiguous cases)
    3. Two-level: UserGoal + WorkType
    4. Context-aware (DTP stage, outputs)
    5. Cached results
end note

note bottom of task_rules
    **Task Execution Hierarchy**
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    All agents follow same order:
    1. Rules (deterministic)
    2. Retrieval (ground in data)
    3. Analytics (calculate)
    4. LLM (narrate only)
    ⚠️ Never skip steps
end note

note right of state_mgr
    **Supervisor Governance**
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    • ONLY component that writes
      case state
    • Validates all transitions
    • Enforces human approval
    • Blocks invalid DTP jumps
    • Logs all changes
end note

note left of artifact_builder
    **Artifact System**
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    • ArtifactPacks with multiple
      artifacts
    • Verification status (VERIFIED/
      PARTIAL/UNVERIFIED)
    • Grounding references
    • Execution metadata (tokens,
      costs, task details)
    • Full audit trail
end note

note top of human
    **Human-in-the-Loop**
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    ✅ Approve → Advance stage
    ✏️ Edit → Modify & resubmit
    ❌ Reject → Stay at stage
    
    AI advises, Human decides
end note

legend right
    |= Color |= Component Type |
    | <#FFEBEE> | Human Actor |
    | <#E3F2FD> | Frontend (Streamlit) |
    | <#E8F5E9> | Backend (FastAPI) |
    | <#FFF3E0> | Supervisor (Orchestrator) |
    | <#F3E5F5> | Official Agents (7) |
    | <#FFF9C4> | Task Execution Layer |
    | <#ECEFF1> | Data / Persistence |
    | <#E8E8E8> | External System |
    
    **Key Governance Rules:**
    1. Supervisor is ONLY state writer
    2. Rules → Retrieval → Analytics → LLM
    3. Hybrid classification (rules + LLM)
    4. Stage advancement requires approval
    5. All artifacts tracked with metadata
endlegend

@enduml

PlantUML version 1.2021.00(Sun Jan 10 05:25:05 EST 2021)
(MIT source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>